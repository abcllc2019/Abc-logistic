<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard – ABC Logistic LLC</title>
</head>
<body>

  <header style="background:#002147; color:#fff; padding:15px; display:flex; align-items:center;">
    <img src="logo.png" alt="ABC Logistic Logo" style="height:50px; margin-right:15px;">
    <h1>Admin Dashboard</h1>
  </header>

  <section style="padding:30px; max-width:800px; margin:auto;">
    <h2>Pending Applications</h2>
    <div id="applicantsList"></div>
  </section>

  <footer style="background:#002147; color:#fff; text-align:center; padding:15px;">
    © 2025 ABC Logistic LLC · Admin Only
  </footer>

  <!-- EmailJS + Applicant Loader -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("vhgTnq8riUK29JBK6"); // Your EmailJS Public Key
    })();

    // Load applicants from localStorage
    window.onload = function() {
      let applicants = JSON.parse(localStorage.getItem("applicants")) || [];
      let savedEmail = localStorage.getItem("applicantEmail");
      let container = document.getElementById("applicantsList");

      if (savedEmail) {
        container.innerHTML += `
          <div style="border:1px solid #ccc; padding:15px; margin:10px; border-radius:8px;">
            <p><strong>Email:</strong> ${savedEmail}</p>
            <button onclick="sendOnboardingEmail('${savedEmail}')">
              ✅ Approve & Send Onboarding Packet
            </button>
          </div>
        `;
      } else {
        container.innerHTML = "<p>No applications yet.</p>";
      }
    }

    // Function to send onboarding email
    function sendOnboardingEmail(email) {
      emailjs.send("service_2bhwn1u", "template_3ffr751", {
        to_email: email
      }).then(function() {
        alert("✅ Onboarding Packet sent to " + email);
      }, function(error) {
        alert("❌ Failed to send email.");
        console.log(error);
      });
    }
  </script>
</body>
</html>
